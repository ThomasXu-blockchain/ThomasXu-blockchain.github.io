<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="baidu-site-verification" content="093lY4ziMu" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="description" content="Thomas_Xu&#39;s Bolg">
    <meta name="keyword"  content="Thomas_Xu, BlockChain">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!--<link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>-->
    <title>
        
          ERC20-721-1155-998 - Thomas_Xu
        
    </title>

    <link rel="canonical" href="https://thomasxu-blockchain.github.io/ERC20-721-1155-998/">

    <!-- Bootstrap Core CSS -->
    
<link rel="stylesheet" href="../css/bootstrap.min.css">


    <!-- Custom CSS --> 
    
        
<link rel="stylesheet" href="../css/dusign-light.css">

        
<link rel="stylesheet" href="../css/dusign-common-light.css">

        
<link rel="stylesheet" href="../css/font-awesome.css">

        
<link rel="stylesheet" href="../css/toc.css">

        <!-- background effects end -->
    
    
    <!-- Pygments Highlight CSS -->
    
<link rel="stylesheet" href="../css/highlight.css">


    
<link rel="stylesheet" href="../css/widget.css">


    
<link rel="stylesheet" href="../css/rocket.css">


    
<link rel="stylesheet" href="../css/signature.css">


    
<link rel="stylesheet" href="../css/fonts.googleapis.css">


    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">

    <!-- photography -->
    
<link rel="stylesheet" href="../css/photography.css">


    <!-- ga & ba script hoook -->
    <script></script>
<meta name="generator" content="Hexo 4.2.1"></head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- background effects start -->
    
    <!-- background effects end -->

	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            
                background-image: linear-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.3)), url('Iron-Man-3.jpg')
                /*post*/
            
        
    }
    
    #signature{
        background-image: url('/img/signature/dusign.png');
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#EIP" title="EIP">EIP</a>
                            
                        </div>
                        <h1>ERC20-721-1155-998</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by Thomas_Xu on
                            2022-10-31
                        </span>

                        

                    </div>
                

                </div>
            </div>
        </div>      
    </div>

    
    <div class="waveWrapper">
        <div class="wave wave_before" style="background-image: url('/img/wave-light.png')"></div>
        <div class="wave wave_after" style="background-image: url('/img/wave-light.png')"></div>
    </div>
    
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Thomas_Xu&#39;s Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/categories/">Categories</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <h1 id="ERC20-721-1155，998协议分析"><a href="#ERC20-721-1155，998协议分析" class="headerlink" title="ERC20,721,1155，998协议分析"></a>ERC20,721,1155，998协议分析</h1><hr>
<pre><code>author：Thomas_Xu
</code></pre><p>最近在总结归纳代币协议，所以把EIP20,721,1155,998首先拿出来对比分析一下。</p>
<p>首先归纳总结一下这三者的区别：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">标准</th>
<th style="text-align:left">ERC-20</th>
<th style="text-align:left">ERC-721</th>
<th style="text-align:left">ERC-1155</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">代币类型</td>
<td style="text-align:left">同质化代币</td>
<td style="text-align:left">非同质化代币</td>
<td style="text-align:left">同质化代币、非同质化代币、介于同质化和非同质化代币之间可以互相切换的代币</td>
</tr>
<tr>
<td style="text-align:left">特点</td>
<td style="text-align:left">统一性、可互换、可拆分</td>
<td style="text-align:left">独特性、不可互换、不可拆分</td>
<td style="text-align:left">前两者的特点都有，且在一定程度上可以在两者中切换</td>
</tr>
<tr>
<td style="text-align:left">生成处理</td>
<td style="text-align:left">一次性只能生成一种 ERC-20 代币，一次性只能进行单笔单对象交易，并且交易处理需要多次批准</td>
<td style="text-align:left">一次性只能生成一种 ERC-721 代币，一次性只能进行单笔单对象交易，并且交易处理需要多次批准</td>
<td style="text-align:left">一次性可以生成多种 ERC-1155 代币资产类别，一次性可以进行多笔多对象交易，交易处理只需要一次批准</td>
</tr>
</tbody>
</table>
</div>
<p>接下来我们分开分析三者的实现逻辑（这里我们不分析其实现方式）</p>
<h2 id="ERC20"><a href="#ERC20" class="headerlink" title="ERC20"></a>ERC20</h2><p><code>ERC20</code>是一种<code>同质化token</code>, <code>token</code>之间是完全等价的. <code>token</code>就是一个<code>uint256</code>类型的数字.</p>
<p><code>ERC20</code>也是在目前普及最多的代币协议。</p>
<p><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol" target="_blank" rel="noopener">ERC20源码</a></p>
<h3 id="EIP20代币标准"><a href="#EIP20代币标准" class="headerlink" title="EIP20代币标准"></a>EIP20代币标准</h3><p><code>EIP20</code>提案是由Fabian Vogelsteller和Vitalik Buterin在2015年11月创建的代币标准，定义了代币合约的标准接口，提供了转移代币的基本功能，并允许代币获得批准，以方便其他链上的第三方使用。此外，该标准接口允许以太坊上定义的任何代币被其他应用程序（钱包、去中心化交易所等）重用。</p>
<h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><p>ERC20 的功能包括但不限于以下几点：</p>
<ul>
<li>转账：将代币从一个帐户转到另一个帐户</li>
<li>查询余额：获取帐户的当前代币余额</li>
<li>查询总量：获取网络上可用代币的总供应量</li>
<li>代币授权：批准一个帐户中一定的代币金额由第三方帐户使用</li>
</ul>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p><img src="ERC20_interface.jpg" alt=""></p>
<p>当要实现一个满足 ERC-20 接口标准的 Token 智能合约时，该合约必须满足以上内容实现。</p>
<h4 id="name"><a href="#name" class="headerlink" title="name"></a>name</h4><p>返回当前 Token 的名称，比如：DSToken，可选项。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function name() constant returns (string name)</span><br></pre></td></tr></table></figure>
<p>在智能合约中定义，可通过构造方法传值进行初始化，也可直接在代码中指定：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string public name;</span><br></pre></td></tr></table></figure>
<h4 id="symbol"><a href="#symbol" class="headerlink" title="symbol"></a>symbol</h4><p>symbol 就是通常使用的简称，比如：EOS，可选项。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function symbol() constant returns (string symbol)</span><br></pre></td></tr></table></figure>
<p>与 name 一样，可通过构造方法传值进行初始化，也可直接在代码中指定：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">string public symbol;</span><br></pre></td></tr></table></figure>
<h4 id="decimals"><a href="#decimals" class="headerlink" title="decimals"></a>decimals</h4><p>当前代币支持的最小精度，也就是小数点后多少位，比如此值为 2，表示 1 个 Token 可分割为 100 份。对应以太坊来说，ETH 的此值为 18，也就是说一个 ETH 可以分割为小数点后 18 位的精度。一般情况下，当查询一个 Token 余额时，是按照最小精度的整型来显示的。比如 decimals 为 2，发行一个代币，那么查询到的结果为 100，此值为可选项。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function decimals() constant returns (uint8 decimals)</span><br></pre></td></tr></table></figure>
<p>与 name 和 symbol 一样，可通过构造方法传值进行初始化，也可直接在代码中指定：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uint8 public decimals;</span><br></pre></td></tr></table></figure>
<h4 id="totalSupply"><a href="#totalSupply" class="headerlink" title="totalSupply"></a>totalSupply</h4><p>Token 的发型总量，此处需注意这个数量的单位与 decimals 中指定的最小单位一致，注意它们之间的换算</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function totalSupply() constant returns (uint256 totalSupply)</span><br></pre></td></tr></table></figure>
<h4 id="balanceOf"><a href="#balanceOf" class="headerlink" title="balanceOf"></a>balanceOf</h4><p>返回地址为_owner的账户的代币余额。返回余额以最小单位计算。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function balanceOf(address _owner) constant returns (uint256 balance)</span><br></pre></td></tr></table></figure>
<p>此账户余额对应智能合约代码中余额的存储，所有的地址与余额之间的关联都是通过此 mapping 进行存储：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mapping (address &#x3D;&gt; uint256) public balanceOf;</span><br></pre></td></tr></table></figure>
<h4 id="transfer"><a href="#transfer" class="headerlink" title="transfer"></a>transfer</h4><p>代币转账操作，从执行转账的地址转出指定数量的代币到目标地址，并且必须触发 Transfer 事件。如果执行转账地址没有足够的余额则抛出异常，支持转账金额为 0。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function transfer(address to, uint256 value) public returns (bool);</span><br></pre></td></tr></table></figure>
<h4 id="transferFrom"><a href="#transferFrom" class="headerlink" title="transferFrom"></a>transferFrom</h4><p>从<code>_from</code>地址发送数量为<code>_value</code>的 token 到<code>_to</code>地址，必须触发 Transfer 事件，主要应用场景为智能合约中对操作账户进行授权，然后达到某个条件时，操作账户可以对被操作账户进行转账操作。如果无权操作则需抛出异常，与 tranfer 相同，可以进行 0 值操作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function transferFrom(address _from, address _to, uint256 _value) returns (bool success)</span><br></pre></td></tr></table></figure>
<h4 id="approve"><a href="#approve" class="headerlink" title="approve"></a>approve</h4><p>设置<code>_spender</code>地址可以从操作此方法的地址那里获得的最高金额，此方法可以多次调用。注意：为了阻止向量攻击，客户端需要确认以这样的方式创建用户接口，即将它们设置为 0，然后将其设置为同一个花费者的另一个值。虽然合同本身不应该强制执行，允许向后兼容以前部署的合同兼容性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function approve(address _spender, uint256 _value) returns (bool success)</span><br></pre></td></tr></table></figure>
<h4 id="allowance"><a href="#allowance" class="headerlink" title="allowance"></a>allowance</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function allowance(address _owner, address _spender) constant returns (uint256 remaining)</span><br></pre></td></tr></table></figure>
<h2 id="ERC721"><a href="#ERC721" class="headerlink" title="ERC721"></a>ERC721</h2><p>和<code>ERC20</code>一样，<code>ERC721</code>同样是一个代币标准，<code>ERC721</code>官方简要解释是Non-Fungible Tokens，简写为NFTs，多翻译为非同质代币。</p>
<p><a href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC721/ERC721.sol" target="_blank" rel="noopener">ERC721源码</a></p>
<h3 id="功能-1"><a href="#功能-1" class="headerlink" title="功能"></a>功能</h3><p>和<code>ERC20</code>差不太多,<code>ERC721</code> 的功能包括但不限于以下几点：</p>
<ul>
<li>转账：将代币从一个帐户转到另一个帐户</li>
<li>查询余额：获取帐户的当前代币余额</li>
<li>查询总量：获取网络上可用代币的总供应量</li>
<li>代币授权：批准一个帐户中一定的代币金额由第三方帐户使用</li>
</ul>
<h3 id="函数-1"><a href="#函数-1" class="headerlink" title="函数"></a>函数</h3><p>ERC721最为一个合约标准，提供了在实现ERC721代币时必须要遵守的协议，要求每个ERC721标准合约需要实现ERC721及ERC165接口，接口定义如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.20;</span><br><span class="line"></span><br><span class="line">interface ERC721  &#123;</span><br><span class="line"></span><br><span class="line">    event Transfer(address indexed _from, address indexed _to, uint256 _tokenId);</span><br><span class="line">    event Approval(address indexed _owner, address indexed _approved, uint256 _tokenId);</span><br><span class="line">    event ApprovalForAll(address indexed _owner, address indexed _operator, bool _approved);</span><br><span class="line"></span><br><span class="line">    function balanceOf(address _owner) external view returns (uint256);</span><br><span class="line">    function ownerOf(uint256 _tokenId) external view returns (address);</span><br><span class="line">    </span><br><span class="line">    function safeTransferFrom(address _from, address _to, uint256 _tokenId, bytes data) external payable;</span><br><span class="line">    function safeTransferFrom(address _from, address _to, uint256 _tokenId) external payable;</span><br><span class="line">    function transferFrom(address _from, address _to, uint256 _tokenId) external payable;</span><br><span class="line">    </span><br><span class="line">    function approve(address _approved, uint256 _tokenId) external payable;</span><br><span class="line">    function setApprovalForAll(address _operator, bool _approved) external;</span><br><span class="line">    function getApproved(uint256 _tokenId) external view returns (address);</span><br><span class="line">    function isApprovedForAll(address _owner, address _operator) external view returns (bool);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="name-1"><a href="#name-1" class="headerlink" title="name"></a>name</h4><p>该函数应当返回通证的名称。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function name() constant returns(string name)&#123;</span><br><span class="line">    return &quot;My Non-FungibleToken&quot;;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h4><p>该函数应当返回通证的符号，它有助于提高与ERC20的兼容性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function symbol() external view returns (string _symbol);</span><br></pre></td></tr></table></figure>
<h4 id="totalSupply-1"><a href="#totalSupply-1" class="headerlink" title="totalSupply"></a>totalSupply</h4><p>该函数应当返回区块链上供应的通证总数量，该数量不一定是固定不变的。 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">contract MyNFT &#123;</span><br><span class="line">  uint256 private totalSupply &#x3D; 1000000000;</span><br><span class="line"> </span><br><span class="line">  function totalSupply() constant returns (uint256supply)&#123;</span><br><span class="line">    return totalSupply;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="balanceOf-1"><a href="#balanceOf-1" class="headerlink" title="balanceOf"></a>balanceOf</h4><p> 返回由_owner 持有的NFTs的数量。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function balanceOf(address _owner) external view returns (uint256);</span><br></pre></td></tr></table></figure>
<h4 id="ownerOf"><a href="#ownerOf" class="headerlink" title="ownerOf"></a>ownerOf</h4><p>返回tokenId代币持有者的地址。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function ownerOf(uint256 _tokenId) external view returns (address);</span><br></pre></td></tr></table></figure>
<h4 id="approve-1"><a href="#approve-1" class="headerlink" title="approve"></a>approve</h4><p>该函数用来授权给另一主体代表持有人进行通证转移操作。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function approve(address _to, uint256 _tokenId);</span><br></pre></td></tr></table></figure>
<h4 id="safeTransferFrom"><a href="#safeTransferFrom" class="headerlink" title="safeTransferFrom"></a>safeTransferFrom</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function safeTransferFrom(address _from, address _to, uint256 _tokenId, bytes data) external payable;</span><br></pre></td></tr></table></figure>
<p>安全地转移NFT所有权并发送数据，即将<code>tokenId</code>为参数<code>_tokenId</code>的NFT的所有权由地址_from转移给地址_to，并将额外的数据data发送给地址_to，并触发Transfer事件。参数data没有格式要求。若地址_to是合约地址，data一般包含函数签名值以及函数参数值，当data发送给_to时，会调用合约_to中签名值对应的函数或者回调函数。</p>
<p>函数能够执行，必需满足以下条件：</p>
<ul>
<li>参数<em>from是</em><code>tokenId</code>对应的NFT的所有者</li>
<li>调用者sender有权转移_<code>tokenId</code>对应NFT的所有权，即：<code>msg.sender</code>是<code>tokenId</code>对应NFT的所有者或者得到了其授权。</li>
<li>参数_to不是零地址</li>
</ul>
<p>另外，该函数使用了<code>payable</code>修饰符，因此可以接收以太坊原生代币（以太币）。</p>
<h4 id="safeTransferFrom-1"><a href="#safeTransferFrom-1" class="headerlink" title="safeTransferFrom"></a>safeTransferFrom</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function safeTransferFrom(address _from, address _to, uint256 _tokenId) external payable;</span><br></pre></td></tr></table></figure>
<p>安全地转移NFT所有权，即将<code>tokenId</code>为参数<code>_tokenId</code>的NFT的所有权由地址_from转移给地址_to，并触发Transfer事件。</p>
<p>调用该函数等价于调用上面的safeTransferFrom中data参数是””的情况，即：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">safeTransferFrom(_from, _to,  _tokenId, &quot;&quot;)</span><br></pre></td></tr></table></figure>
<h4 id="transferFrom-1"><a href="#transferFrom-1" class="headerlink" title="transferFrom"></a>transferFrom</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function transferFrom(address _from, address _to, uint256 _tokenId) external payable;</span><br></pre></td></tr></table></figure>
<p>转移NFT所有权，即将<code>tokenId</code>为参数<code>_tokenId</code>的NFT的所有权由地址_from转移给地址_to，并触发Transfer事件。</p>
<h4 id="approve-2"><a href="#approve-2" class="headerlink" title="approve"></a>approve</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function approve(address _approved, uint256 _tokenId) external payable;</span><br></pre></td></tr></table></figure>
<p>将<code>tokenId</code>为参数<code>_tokenId</code>的NFT授权给地址_approved，或者更新授权地址为_approved，并且触发Approve事件。</p>
<p>函数能够执行，必需满足以下条件：</p>
<ul>
<li>调用者sender有权转移_tokenId对应NFT的所有权，即：msg.sender是_tokenId对应NFT的所有者或者得到了其授权。</li>
</ul>
<h2 id="ERC1155"><a href="#ERC1155" class="headerlink" title="ERC1155"></a><strong>ERC1155</strong></h2><p>根据<code>ERC1155</code>的<a href="[ERC-1155 多代币标准 | ethereum.org](https://ethereum.org/zh/developers/docs/standards/tokens/erc-1155/">官方文档</a>)的介绍，<code>ERC1155</code>是用于多种代币管理的合约标准接口。 单个部署的合约可以包括同质化代币、非同质化代币或其他配置（如半同质化代币）的任何组合。</p>
<h3 id="多代币标准"><a href="#多代币标准" class="headerlink" title="多代币标准"></a><strong>多代币标准</strong></h3><p>多代币标准的的目的很单纯，就是创建一个智能合约接口，可以代表和控制任何数量的同质化和非同质化代币类型。 这样一来，<code>ERC-1155</code> 代币就具有与 <a href="https://ethereum.org/zh/developers/docs/standards/tokens/erc-20/" target="_blank" rel="noopener">ERC-20</a> 和 <a href="https://ethereum.org/zh/developers/docs/standards/tokens/erc-721/" target="_blank" rel="noopener">ERC-721</a> 代币相同的功能，甚至可以同时使用这两者的功能。 而最重要的是，它能改善这两种标准的功能，使其更有效率，并纠正 <code>ERC-20</code> 和 <code>ERC-721</code>标准上明显的实施错误。</p>
<p><a href="https://eips.ethereum.org/EIPS/eip-1155" target="_blank" rel="noopener">EIP-1155</a> 中对 ERC-1155 代币进行了全面的描述。</p>
<h3 id="EIP1155代币标准"><a href="#EIP1155代币标准" class="headerlink" title="EIP1155代币标准"></a>EIP1155代币标准</h3><p><code>BIP1155</code>提案概述了一个标准的智能合约接口，可以代表任意数量的同质化代币和非同质化代币类型。ERC20等现有标准要求为每种代币类型部署单独的合约。ERC721标准的代币ID是一个单一的非同质化索引，每组非同质化代币都会被部署为具有统一设置的独立的合约。相比之下，ERC1155多代币标准允许每个代币ID表示一个新的可配置代币类型，它可以有自己的元数据、供应量以及其他属性。</p>
<p>每个函数的参数集合中都会包含_id参数，表示交易中的一种特定的代币或代币类型。</p>
<h3 id="ERC-1155-的功能和特点"><a href="#ERC-1155-的功能和特点" class="headerlink" title="ERC-1155 的功能和特点"></a>ERC-1155 的功能和特点</h3><h4 id="批量传输"><a href="#批量传输" class="headerlink" title="批量传输"></a>批量传输</h4><p>通过一次合约调用传输多种资产。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; ERC-20</span><br><span class="line">function transferFrom(address from, address to, uint256 value) external returns (bool);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ERC-1155</span><br><span class="line">function safeBatchTransferFrom(</span><br><span class="line">    address _from,</span><br><span class="line">    address _to,</span><br><span class="line">    uint256[] calldata _ids,</span><br><span class="line">    uint256[] calldata _values,</span><br><span class="line">    bytes calldata _data</span><br><span class="line">) external;</span><br></pre></td></tr></table></figure>
<p>批量传输和ERC20的传输非常相似。唯一的区别就是我们将数值作为数组传递。同时传递了数组id。</p>
<p>举个例子：我们给出<code>ids=[3, 6, 13]</code> 和 <code>values=[100, 200, 5]</code>，传输结果将是：</p>
<ol>
<li>将 id 3 的 100 个代币从 <code>_from</code> 传输到 <code>_to</code>。</li>
<li>将 id 6 的 200 个代币从 <code>_from</code> 传输到 <code>_to</code>。</li>
<li>将 id 13 的 5 个代币从 <code>_from</code> 转移到 <code>_to</code>。</li>
</ol>
<p>值得注意的是在ERC-1155中，我们只有<code>transferFrom</code>而没有<code>transfer</code>。</p>
<h4 id="批量余额"><a href="#批量余额" class="headerlink" title="批量余额"></a>批量余额</h4><p>我们也用ERC20版本的余额查询作为对比：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; ERC-20</span><br><span class="line">function balanceOf(address owner) external view returns (uint256);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; ERC-1155</span><br><span class="line">function balanceOfBatch(</span><br><span class="line">    address[] calldata _owners,</span><br><span class="line">    uint256[] calldata _ids</span><br><span class="line">) external view returns (uint256[] memory);</span><br></pre></td></tr></table></figure>
<p>其实可以发现，在ERC1155版本中查询余额会更加方便，我们可以在单次调用中获取多个余额。参数中传递所有者账户数组和代币id数组。</p>
<p>举个例子，对于给出的 <code>_ids=[3, 6, 13]</code> 和 <code>_owners=[0xbeef..., 0x1337..., 0x1111...]</code>，返回值将为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    balanceOf(0xbeef...),</span><br><span class="line">    balanceOf(0x1337...),</span><br><span class="line">    balanceOf(0x1111...)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<h4 id="批量审批"><a href="#批量审批" class="headerlink" title="批量审批"></a>批量审批</h4><p>ERC1155的授权过程与ERC20有所不同，这里不是批准特定的金额，而是通过<code>setApprovalForall</code>函数设置操作账户为已批准或未批准（传参：批准为true，不批准为false）</p>
<p>查看当前的审批状态可以通过 <code>isApprovedForall</code> 完成。 如您所见，要么全部批准，要么不批准。 不能定义要批准代币的数量，甚至代币类型。</p>
<p>这是考虑到简洁性而故意设计的。 您只能批准一个地址的所有代币。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; ERC-1155</span><br><span class="line">function setApprovalForAll(</span><br><span class="line">    address _operator,</span><br><span class="line">    bool _approved</span><br><span class="line">) external;</span><br><span class="line"></span><br><span class="line">function isApprovedForAll(</span><br><span class="line">    address _owner,</span><br><span class="line">    address _operator</span><br><span class="line">) external view returns (bool);</span><br></pre></td></tr></table></figure>
<h4 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function onERC1155BatchReceived(</span><br><span class="line">    address _operator,</span><br><span class="line">    address _from,</span><br><span class="line">    uint256[] calldata _ids,</span><br><span class="line">    uint256[] calldata _values,</span><br><span class="line">    bytes calldata _data</span><br><span class="line">) external returns(bytes4);</span><br></pre></td></tr></table></figure>
<p>基于 <a href="https://eips.ethereum.org/EIPS/eip-165" target="_blank" rel="noopener">EIP-165</a> 的协议支持，ERC-1155 只支持智能合约的接收回调函数。回调函数必须返回一个事先预定义的 4 字节值，这个值被指定为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bytes4(keccak256(&quot;onERC1155BatchReceived(address,address,uint256[],uint256[],bytes)&quot;))</span><br></pre></td></tr></table></figure>
<p>当接收合约返回这一值时，意味着合约知道如何处理 ERC-1155 代币并接受转账。 </p>
<h2 id="ERC998"><a href="#ERC998" class="headerlink" title="ERC998"></a>ERC998</h2><p>ERC-998名叫可拆解非同质化代币（Composable NFT，缩写为CNFT）。它的设计可以让任何一个NFT可以拥有其他NFT或FT。转移CNFT时，就是转移CNFT所拥有的整个层级结构和所属关系。简单来说就是一个ERC-998的物品可以包含多个ERC-721和ERC-20形式的物品。</p>
<p>举个简单的例子，可以帮助我们更快的理解ERC998到底有什么用。</p>
<blockquote>
<p>比如说你想在区块链游戏当中拥有一个角色，那么这个角色本身就是一个基于ERC721的NFT。当你达到一定等级时，一定想要给角色买一些装备，例如衣服等等。但是每一样装备都是一个NFT的话，其实在角色和装备之间，是没有联系的，都是作为单独的NFT存在。</p>
<p>但是在ERC998出现以后，我们可以把角色看为父token，装备等等都是子token，这样一来，二者便变得不可分割，在交易角色的同时，装备等等也会同时被交易。</p>
</blockquote>
<p>我认为，ERC998除了在游戏当中的应用，还可以应用在历史版本迭代等问题上，总之，ERC998的可应用性，还是非常强的。</p>
<h3 id="简单总结"><a href="#简单总结" class="headerlink" title="简单总结"></a>简单总结</h3><p>ERC-721标准的扩展，使ERC721代币能够拥有其他ERC721代币和<a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-721.md" target="_blank" rel="noopener">ERC20</a>代币。</p>
<p>ERC-20和<a href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-20.md" target="_blank" rel="noopener">ERC-223</a>标准的扩展，使ERC20和ERC223代币由<a href="https://github.com/ethereum/EIPs/issues/223" target="_blank" rel="noopener">ERC721</a>代币拥有。</p>
<p>此规范涵盖四种不同类型的可组合令牌：</p>
<ol>
<li>ERC998ERC721 自上而下的可组合代币是一种 ERC721 代币，具有用于拥有其他 ERC721 代币的附加功能。</li>
<li>ERC998ERC20 自上而下的可组合代币是一种 ERC721 代币，具有拥有 ERC20 代币的附加功能。</li>
<li>ERC998ERC721自下而上可组合的代币是一种ERC721代币，具有由ERC721代币拥有的附加功能。</li>
<li>ERC998ERC20自下而上可组合的ERC20代币具有ERC721代币拥有的附加功能。</li>
</ol>
<p>开发时如何选择这四种类型的可组合令牌呢？</p>
<ul>
<li><p>如果您想将常规 ERC721 代币转移到不可替代代币，请使用自上而下的可组合代币。</p>
</li>
<li><p>如果您想将不可替代的代币转移到常规的ERC721代币，请使用自下而上的可组合代币。</p>
</li>
</ul>
<p>ERC-998的结构中包含两种映射关系，父tokenID映射到子token合约地址。当子token是NFT/FT时，子合约地址映射到对应的子tokenID/余额。 也就是说对于子ERC-721 token，ERC-998会追踪tokenID，而对于ERC-20 token，ERC-998会追踪token数量。 这种内部记账将有助于确保不拥有父token的人无法转移子token。</p>

                
                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/ERC777-1820/" data-toggle="tooltip" data-placement="top" title="ERC777-1820">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/paradigm22-merkleDrop/" data-toggle="tooltip" data-placement="top" title="Paradigm 题解 MerkleDrop">Next Post &rarr;</a>
                    </li>
                    
                </ul>

                <!-- tip start -->
                
                <div class="comment_notes_blank"></div>
                <div class="visitor_notice">
                    <img 
                        src="/img/notice.png" 
                        alt="notice"
                        title="notice"/>
                    <p class="notice">
                        true
                    </p>
                </div>
                

                
                <div class="comment_notes">
                    <p>
                        This is copyright.
                    </p>
                </div>
                
                <!-- tip end -->

                <!-- Music start-->
                
                
<link rel="stylesheet" href="../css/music-player/fonts/iconfont.css">


<link rel="stylesheet" href="../css/music-player/css/reset.css">


<link rel="stylesheet" href="../css/music-player/css/player.css">


<div class="music-player">
    <audio class="music-player__audio" ></audio>
    <div class="music-player__main">
        <div class="music-player__blur"></div>
        <div class="music-player__disc">
            <div class="music-player__image">
                <img width="100%" src="" alt="">
            </div>
            <div class="music-player__pointer"><img width="100%" src="/img/cd_tou.png" alt=""></div>
        </div>
        <div class="music-player__controls">
            <div class="music__info">
                <h3 class="music__info--title">...</h3>
                <p class="music__info--singer">...</p>
            </div>
            <div class="player-control">
                <div class="player-control__content">
                    <div class="player-control__btns">
                        <div class="player-control__btn player-control__btn--prev"><i class="iconfont icon-prev"></i></div>
                        <div class="player-control__btn player-control__btn--play"><i class="iconfont icon-play"></i></div>
                        <div class="player-control__btn player-control__btn--next"><i class="iconfont icon-next"></i></div>
                        <div class="player-control__btn player-control__btn--mode"><i class="iconfont icon-loop"></i></div>
                    </div>
                    <div class="player-control__volume">
                        <div class="control__volume--icon player-control__btn"><i class="iconfont icon-volume"></i></div>
                        <div class="control__volume--progress player_progress"></div>
                    </div>
                </div>
                <div class="player-control__content">
                    <div class="player__song--progress player_progress"></div>
                    <div class="player__song--timeProgess nowTime">00:00</div>
                    <div class="player__song--timeProgess totalTime">00:00</div>
                </div>
            </div>
        </div>
    </div>
</div>


<script src="../js/music-player/utill.js"></script>


<script src="../js/music-player/jquery.min.js"></script>

<!-- netease; qqkg -->
<!--
<script src="../js/music-player/player.js?library=config.music.library.js"></script>
-->
<script src="../../../../js/music-player/player.js?library=netease&music=https://kg.qq.com/node/play?s=7deFpz7Z26Jmv7di&g_f=share_html"></script>
                
                <!-- Music end -->

                <!-- Sharing -->
                
                <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                <!--  css & js -->
                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!-- Sharing -->

                <!-- gitment start -->
                
                <!-- gitment end -->

                <!-- 来必力City版安装代码 -->
                
                <!-- City版安装代码已完成 -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->
            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

    
      
        <aside id="sidebar">
          <div id="toc" class="toc-article">
          <strong class="toc-title">Contents</strong>
          
            
              <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#ERC20-721-1155，998协议分析"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">ERC20,721,1155，998协议分析</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#ERC20"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">ERC20</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#EIP20代币标准"><span class="toc-nav-number">1.1.1.</span> <span class="toc-nav-text">EIP20代币标准</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#功能"><span class="toc-nav-number">1.1.2.</span> <span class="toc-nav-text">功能</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#函数"><span class="toc-nav-number">1.1.3.</span> <span class="toc-nav-text">函数</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#name"><span class="toc-nav-number">1.1.3.1.</span> <span class="toc-nav-text">name</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#symbol"><span class="toc-nav-number">1.1.3.2.</span> <span class="toc-nav-text">symbol</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#decimals"><span class="toc-nav-number">1.1.3.3.</span> <span class="toc-nav-text">decimals</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#totalSupply"><span class="toc-nav-number">1.1.3.4.</span> <span class="toc-nav-text">totalSupply</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#balanceOf"><span class="toc-nav-number">1.1.3.5.</span> <span class="toc-nav-text">balanceOf</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#transfer"><span class="toc-nav-number">1.1.3.6.</span> <span class="toc-nav-text">transfer</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#transferFrom"><span class="toc-nav-number">1.1.3.7.</span> <span class="toc-nav-text">transferFrom</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#approve"><span class="toc-nav-number">1.1.3.8.</span> <span class="toc-nav-text">approve</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#allowance"><span class="toc-nav-number">1.1.3.9.</span> <span class="toc-nav-text">allowance</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#ERC721"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">ERC721</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#功能-1"><span class="toc-nav-number">1.2.1.</span> <span class="toc-nav-text">功能</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#函数-1"><span class="toc-nav-number">1.2.2.</span> <span class="toc-nav-text">函数</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#name-1"><span class="toc-nav-number">1.2.2.1.</span> <span class="toc-nav-text">name</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#Symbol"><span class="toc-nav-number">1.2.2.2.</span> <span class="toc-nav-text">Symbol</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#totalSupply-1"><span class="toc-nav-number">1.2.2.3.</span> <span class="toc-nav-text">totalSupply</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#balanceOf-1"><span class="toc-nav-number">1.2.2.4.</span> <span class="toc-nav-text">balanceOf</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#ownerOf"><span class="toc-nav-number">1.2.2.5.</span> <span class="toc-nav-text">ownerOf</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#approve-1"><span class="toc-nav-number">1.2.2.6.</span> <span class="toc-nav-text">approve</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#safeTransferFrom"><span class="toc-nav-number">1.2.2.7.</span> <span class="toc-nav-text">safeTransferFrom</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#safeTransferFrom-1"><span class="toc-nav-number">1.2.2.8.</span> <span class="toc-nav-text">safeTransferFrom</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#transferFrom-1"><span class="toc-nav-number">1.2.2.9.</span> <span class="toc-nav-text">transferFrom</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#approve-2"><span class="toc-nav-number">1.2.2.10.</span> <span class="toc-nav-text">approve</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#ERC1155"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">ERC1155</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#多代币标准"><span class="toc-nav-number">1.3.1.</span> <span class="toc-nav-text">多代币标准</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#EIP1155代币标准"><span class="toc-nav-number">1.3.2.</span> <span class="toc-nav-text">EIP1155代币标准</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#ERC-1155-的功能和特点"><span class="toc-nav-number">1.3.3.</span> <span class="toc-nav-text">ERC-1155 的功能和特点</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#批量传输"><span class="toc-nav-number">1.3.3.1.</span> <span class="toc-nav-text">批量传输</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#批量余额"><span class="toc-nav-number">1.3.3.2.</span> <span class="toc-nav-text">批量余额</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#批量审批"><span class="toc-nav-number">1.3.3.3.</span> <span class="toc-nav-text">批量审批</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#回调函数"><span class="toc-nav-number">1.3.3.4.</span> <span class="toc-nav-text">回调函数</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#ERC998"><span class="toc-nav-number">1.4.</span> <span class="toc-nav-text">ERC998</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#简单总结"><span class="toc-nav-number">1.4.1.</span> <span class="toc-nav-text">简单总结</span></a></li></ol></li></ol></li></ol>
            
          
          </div>
        </aside>
      
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#EIP" title="EIP">EIP</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>
    </div>
</article>




<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>


<style  type="text/css">
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">

                
                    <li>
                        <a target="_blank"  href="https://github.com/ThomasXu-blockchain">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                

                

                

                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; Thomas_Xu 2022 
                    <br>
                    Powered by 
                    <a href="https://github.com/dusign/hexo-theme-snail" target="_blank" rel="noopener">
                        <i>hexo-theme-snail</i>
                    </a> | 
                    <iframe name="star" style="margin-left: 2px; margin-bottom:-5px;" frameborder="0" scrolling="0"
                        width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=dusign&repo=hexo-theme-snail&type=star&count=true">
                    </iframe>
                </p>
            </div>
        </div>
    </div>

</footer>

<!-- jQuery -->

<script src="../js/jquery.min.js"></script>


<!-- Bootstrap Core JavaScript -->

<script src="../js/bootstrap.min.js"></script>


<!-- Custom Theme JavaScript -->

<script src="../js/hux-blog.min.js"></script>


<!-- Search -->

<script src="../js/search.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("https://thomasxu-blockchain.github.io/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->




<!-- Baidu Tongji -->


<!-- Search -->

    <script type="text/javascript">      
        var search_path = "search.xml";
        if (search_path.length == 0) {
            search_path = "search.xml";
        }
    var path = "/" + search_path;
    searchFunc(path, 'local-search-input', 'local-search-result');
    </script>


<!-- busuanzi -->
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>

    
        <!-- background effects line -->
        

        
            <script type="text/javascript" src="/js/mouse-click.js" content='[&quot;🍰&quot;,&quot;当大潮褪去，才知道谁在裸泳&quot;,&quot;🍭&quot;]' color='[&quot;rgb(121,93,179)&quot; ,&quot;rgb(76,180,231)&quot; ,&quot;rgb(184,90,154)&quot;]'></script>
        

        <!-- background effects end -->
    

    <!--<script size="50" alpha='0.3' zIndex="-999" src="/js/ribbonStatic.js"></script>-->
    
        <script src="/js/ribbonDynamic.js"></script>
    
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>

</html>
